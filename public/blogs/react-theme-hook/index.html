<!DOCTYPE html>
<html><head lang="en"><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
	<meta charset="utf-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge"><title>Custom Theme Switcher Hook in React - IndieCoder</title><meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="description" content="Learn how to build a reusable theme switcher hook in React to seamlessly toggle between dark and light modes, with persistence across sessions." />
	<meta property="og:image" content=""/>
	<meta property="og:title" content="Custom Theme Switcher Hook in React" />
<meta property="og:description" content="Learn how to build a reusable theme switcher hook in React to seamlessly toggle between dark and light modes, with persistence across sessions." />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://localhost:1313/blogs/react-theme-hook/" /><meta property="article:section" content="blogs" />
<meta property="article:published_time" content="2023-10-04T00:00:00+00:00" />
<meta property="article:modified_time" content="2023-10-04T00:00:00+00:00" />

<meta name="twitter:card" content="summary"/><meta name="twitter:title" content="Custom Theme Switcher Hook in React"/>
<meta name="twitter:description" content="Learn how to build a reusable theme switcher hook in React to seamlessly toggle between dark and light modes, with persistence across sessions."/>
<link rel="stylesheet" href="http://localhost:1313/css/simple-icons.96a04481ed361b77f631ece0a17677052d42318f13c149b220a4ef29ce65e50a.css" type="text/css"><link rel="stylesheet" href="http://localhost:1313/css/simple-icons.96a04481ed361b77f631ece0a17677052d42318f13c149b220a4ef29ce65e50a.css" type="text/css"><link rel="stylesheet" href="http://localhost:1313/css/simple-icons.96a04481ed361b77f631ece0a17677052d42318f13c149b220a4ef29ce65e50a.css" type="text/css">
        <link href="http://localhost:1313/css/fonts.2c2227b81b1970a03e760aa2e6121cd01f87c88586803cbb282aa224720a765f.css" rel="stylesheet">
	

	
	<link rel="stylesheet" type="text/css" media="screen" href="http://localhost:1313/css/main.67e5dc02b4cfe98a5c9d3e4d16b338d0efcd8ef69c535dfed281f6da1ccf483d.css" />
		<link id="darkModeStyle" rel="stylesheet" type="text/css" href="http://localhost:1313/css/dark.56d054d40586dc34f79a5d50f52e685aa3a6adf2ffb6b9068adbc871668906f0.css"   />
</head>
<body>
        <div class="content"><header>
	<div class="main">
		<a href="http://localhost:1313/">IndieCoder</a>
	</div>
	<nav>
		
		<a href="/">Home</a>
		
		<a href="/blogs">Blogs</a>
		
		<a href="/about">About</a>
		
		<a href="/tags">Tags</a>
		
		
	</nav>
</header>

<main>
  <article>
    <div class="post-container">
      
      <div class="post-content">
        <div class="title">
          <h1 class="title">Custom Theme Switcher Hook in React</h1>
          <div class="meta">Posted on Oct 4, 2023</div>
        </div>
        
        <section class="body">
          <p>In this tutorial, I’ll show you how to build a custom theme switcher hook in React. By the end, you’ll have a reusable hook that can add dark/light mode to any React project.</p>
<p>We’ll cover:</p>
<ol>
<li>Creating the hook step-by-step.</li>
<li>Saving the user’s theme preference.</li>
<li>Adding dark/light mode toggle functionality.</li>
</ol>
<h2 id="logic">Logic</h2>
<p>Here’s how the custom hook works:</p>
<ol>
<li>It checks for a saved theme in local storage.</li>
<li>If no saved theme is found, it checks the system’s dark mode preference.</li>
<li>It updates the theme dynamically and stores the user’s choice for the next session.</li>
</ol>
<h2 id="creating-a-custom-hook">Creating a custom hook</h2>
<p>This custom hook will handle the logic for switching between light and dark themes. Let’s create a new file called <code>useThemeSwitcher.js</code> and add the following code:</p>
<div class="highlight"><pre tabindex="0" style="color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#ff7b72">import</span> { useEffect, useState } from <span style="color:#a5d6ff">&#34;react&#34;</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff7b72">const</span> useThemeSwitcher <span style="color:#ff7b72;font-weight:bold">=</span> () =&gt; {
</span></span><span style="display:flex;"><span>  <span style="color:#8b949e;font-style:italic">// Define the media query for dark mode preference
</span></span></span><span style="display:flex;"><span><span style="color:#8b949e;font-style:italic"></span>  <span style="color:#ff7b72">const</span> preferDarkQuery <span style="color:#ff7b72;font-weight:bold">=</span> <span style="color:#a5d6ff">&#34;(prefer-color-scheme: dark)&#34;</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#8b949e;font-style:italic">// Initialize state to store the current theme
</span></span></span><span style="display:flex;"><span><span style="color:#8b949e;font-style:italic"></span>  <span style="color:#ff7b72">const</span> [mode, setMode] <span style="color:#ff7b72;font-weight:bold">=</span> useState(<span style="color:#a5d6ff">&#34;&#34;</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#8b949e;font-style:italic">// Use the useEffect hook to set the initial theme
</span></span></span><span style="display:flex;"><span><span style="color:#8b949e;font-style:italic"></span>  useEffect(() =&gt; {
</span></span><span style="display:flex;"><span>    <span style="color:#8b949e;font-style:italic">// Check if a theme is stored in local storage
</span></span></span><span style="display:flex;"><span><span style="color:#8b949e;font-style:italic"></span>    <span style="color:#ff7b72">const</span> localMode <span style="color:#ff7b72;font-weight:bold">=</span> localStorage.getItem(<span style="color:#a5d6ff">&#34;theme&#34;</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#8b949e;font-style:italic">// Check if the user prefers dark mode
</span></span></span><span style="display:flex;"><span><span style="color:#8b949e;font-style:italic"></span>    <span style="color:#ff7b72">const</span> prefersDark <span style="color:#ff7b72;font-weight:bold">=</span> window.matchMedia(preferDarkQuery).matches;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#8b949e;font-style:italic">// Set the initial theme based on local storage or user preference
</span></span></span><span style="display:flex;"><span><span style="color:#8b949e;font-style:italic"></span>    <span style="color:#ff7b72">if</span> (localMode) {
</span></span><span style="display:flex;"><span>      setMode(localMode);
</span></span><span style="display:flex;"><span>    } <span style="color:#ff7b72">else</span> <span style="color:#ff7b72">if</span> (prefersDark) {
</span></span><span style="display:flex;"><span>      setMode(<span style="color:#a5d6ff">&#34;dark&#34;</span>);
</span></span><span style="display:flex;"><span>    } <span style="color:#ff7b72">else</span> {
</span></span><span style="display:flex;"><span>      setMode(<span style="color:#a5d6ff">&#34;light&#34;</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>  }, []);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#8b949e;font-style:italic">// Use another useEffect hook to update the theme when it changes
</span></span></span><span style="display:flex;"><span><span style="color:#8b949e;font-style:italic"></span>  useEffect(() =&gt; {
</span></span><span style="display:flex;"><span>    <span style="color:#8b949e;font-style:italic">// Update local storage with the current theme
</span></span></span><span style="display:flex;"><span><span style="color:#8b949e;font-style:italic"></span>    <span style="color:#ff7b72">if</span> (mode <span style="color:#ff7b72;font-weight:bold">===</span> <span style="color:#a5d6ff">&#34;dark&#34;</span>) {
</span></span><span style="display:flex;"><span>      localStorage.setItem(<span style="color:#a5d6ff">&#34;theme&#34;</span>, <span style="color:#a5d6ff">&#34;dark&#34;</span>);
</span></span><span style="display:flex;"><span>      document.documentElement.classList.add(<span style="color:#a5d6ff">&#34;dark&#34;</span>);
</span></span><span style="display:flex;"><span>    } <span style="color:#ff7b72">else</span> {
</span></span><span style="display:flex;"><span>      localStorage.setItem(<span style="color:#a5d6ff">&#34;theme&#34;</span>, <span style="color:#a5d6ff">&#34;light&#34;</span>);
</span></span><span style="display:flex;"><span>      document.documentElement.classList.remove(<span style="color:#a5d6ff">&#34;dark&#34;</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>  }, [mode]);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#8b949e;font-style:italic">// Return the current theme and a function to switch themes
</span></span></span><span style="display:flex;"><span><span style="color:#8b949e;font-style:italic"></span>  <span style="color:#ff7b72">return</span> [mode, setMode];
</span></span><span style="display:flex;"><span>};
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff7b72">export</span> <span style="color:#ff7b72">default</span> useThemeSwitcher;
</span></span></code></pre></div><ul>
<li><code>preferDarkQuery</code> variable is set to check if the user prefers dark mode. It uses a special CSS media query.</li>
<li>We initialize the <code>mode</code> state variable to keep track of the current theme (light or dark).</li>
<li>The first <code>useEffect</code> checks local storage and the user’s system preferences to set the initial theme on app load.</li>
<li>The second <code>useEffect</code> will run whenever we change the theme using <code>setMode</code>, and it will update the app’s theme and saves the user’s choice to local storage.</li>
</ul>
<h2 id="using-the-hook">Using the Hook</h2>
<p>You can use this hook in your React components like this:</p>
<div class="highlight"><pre tabindex="0" style="color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#ff7b72">import</span> useThemeSwitcher from <span style="color:#a5d6ff">&#34;./useThemeSwitcher&#34;</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff7b72">function</span> App() {
</span></span><span style="display:flex;"><span>  <span style="color:#ff7b72">const</span> [theme, setTheme] <span style="color:#ff7b72;font-weight:bold">=</span> useThemeSwitcher();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#8b949e;font-style:italic">// Create a function to toggle the theme
</span></span></span><span style="display:flex;"><span><span style="color:#8b949e;font-style:italic"></span>  <span style="color:#ff7b72">const</span> toggleTheme <span style="color:#ff7b72;font-weight:bold">=</span> () =&gt; {
</span></span><span style="display:flex;"><span>    <span style="color:#ff7b72">if</span> (theme <span style="color:#ff7b72;font-weight:bold">===</span> <span style="color:#a5d6ff">&#34;light&#34;</span>) {
</span></span><span style="display:flex;"><span>      setTheme(<span style="color:#a5d6ff">&#34;dark&#34;</span>);
</span></span><span style="display:flex;"><span>    } <span style="color:#ff7b72">else</span> {
</span></span><span style="display:flex;"><span>      setTheme(<span style="color:#a5d6ff">&#34;light&#34;</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>  };
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#ff7b72">return</span> (
</span></span><span style="display:flex;"><span>    <span style="color:#ff7b72;font-weight:bold">&lt;</span>div className<span style="color:#ff7b72;font-weight:bold">=</span>{<span style="color:#a5d6ff">`App </span><span style="color:#a5d6ff">${</span>theme<span style="color:#a5d6ff">}</span><span style="color:#a5d6ff">`</span>}<span style="color:#ff7b72;font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#ff7b72;font-weight:bold">&lt;</span>h1<span style="color:#ff7b72;font-weight:bold">&gt;</span>Theme Switcher Example<span style="color:#ff7b72;font-weight:bold">&lt;</span><span style="color:#f85149">/h1&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#ff7b72;font-weight:bold">&lt;</span>button onClick<span style="color:#ff7b72;font-weight:bold">=</span>{toggleTheme}<span style="color:#ff7b72;font-weight:bold">&gt;</span>Toggle Theme<span style="color:#ff7b72;font-weight:bold">&lt;</span><span style="color:#f85149">/button&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#ff7b72;font-weight:bold">&lt;</span>p<span style="color:#ff7b72;font-weight:bold">&gt;</span>Current Theme<span style="color:#ff7b72;font-weight:bold">:</span> {theme}<span style="color:#ff7b72;font-weight:bold">&lt;</span><span style="color:#f85149">/p&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#ff7b72;font-weight:bold">&lt;</span><span style="color:#f85149">/div&gt;</span>
</span></span><span style="display:flex;"><span>  );
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff7b72">export</span> <span style="color:#ff7b72">default</span> App;
</span></span></code></pre></div><p>And that’s it! You now have a reusable custom hook for managing dark/light mode in your React apps.</p>
<p>Happy coding!</p>

        </section>
        <div class="post-tags">
          
          
          <nav class="nav tags">
            <ul class="tags">
              
              <li><a href="/tags/react">react</a></li>
              
              <li><a href="/tags/frontend">frontend</a></li>
              
              <li><a href="/tags/webdev">webdev</a></li>
              
              <li><a href="/tags/js">js</a></li>
              
            </ul>
          </nav>
          
          
        </div>
      </div>

      
      
    </div>

    <div id="disqus_thread"></div>
<script type="text/javascript">
    (function () {
        
        
        if (window.location.hostname == "localhost")
            return;

        var dsq = document.createElement('script');
        dsq.type = 'text/javascript';
        dsq.async = true;
        var disqus_shortname = 'heinthant';
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by
        Disqus.</a></noscript>
<a href="http://disqus.com/" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</article>
</main>
<footer>
  <div style="display:flex"><a class="soc" href="https://github.com/indiecodermm/" rel="me" title="GitHub" target="_blank"><i class="si si-github"></i></a><span class="separator"></span><a class="soc" href="https://twitter.com/hthantoo/" rel="me" title="BlueSky" target="_blank"><i class="si si-bluesky"></i></a><span class="separator"></span><a class="soc" href="https://www.linkedin.com/in/hthantoo/" rel="me" title="LinkedIn" target="_blank"><i class="si si-linkedin"></i></a><span class="separator"></span></div>
  <div class="footer-info">
    2025  © Hein Thant <span class="separator"></span>  <a
      href="https://github.com/athul/archie">Archie Theme</a>
  </div>
</footer>

</div>
    </body>
</html>
